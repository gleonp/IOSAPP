workflows:
  default:
    name: Default workflow
    environment:
      node: 18.18.2 # Configura la versi√≥n de Node.js que necesitas
      xcode: latest
      cocoapods: default # Habilita el uso de CocoaPods
    scripts:

    - name: Clean and remove iOS platform
        script: |
          cordova clean
          cordova platform remove ios

      - name: Install Cordova globally
        script: |
          npm install -g cordova      

      - name: Install CocoaPods
        script: |
          sudo gem install cocoapods
          pod setup
          pod repo update 

      - name: Install npm dependencies
        script: |
          npm install

      - name: Install jq for language updates
        script: |
          brew install jq # Usa Homebrew para instalar jq
          
      #- name: Update language packs
      #  script: |
      #    npm run lang:update-langpacks

      - name: Install and run cordova-res
        script: |
          npm i -g cordova-res
          cordova-res

      - name: Build iOS app
        script: |
          npm run prod:ios

    artifacts:
      - platforms/ios/**/*